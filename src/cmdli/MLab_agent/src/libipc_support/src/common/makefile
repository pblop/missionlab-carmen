# Make file for libmic/common 
#
# Written by: Douglas C. MacKenzie
#
# Copyright 1996-2002.  All Rights Reserved.                      
# Mobile Intelligence Corporation                                
# Livonia, Michigan, USA                                           
#                                                              
#********************************************************************

# $Id: makefile,v 1.1.1.1 2008/07/14 16:44:16 endo Exp $

# ---------------------------------------------------

# Get system wide defaults
include $(SUPPORT_DIR)/make.include
include ../../make.local

# ---------------------------------------------------

CC_SRCS = ipc_xdr.cc

# ---------------------------------------------------
RPCFLAGS = -C -b -N
# ---------------------------------------------------

INCLUDES = -I../include -I$(LIBMIC_DIR)/include

# We don't want to build the object for win32, just the header.
ifeq ($(TARGET_OS),linux)
../$(ARCHIVE): $(OBJS)
	$(AR) $(ARFLAGS) $@ $^
	
all: ../$(ARCHIVE)

endif
ifeq ($(TARGET_OS),win32)
all: ipc_defs.h

endif

#Make a header file for the RPC stuff
ipc_defs.h: ipc_defs.x
	mic_rpcgen $(RPCFLAGS) -h ipc_defs.x | ./clean_defs.sh > ipc_defs.h

#make the XDR routines 
ipc_xdr.cc: ipc_defs.h
	mic_rpcgen $(RPCFLAGS) -c ipc_defs.x | ./clean_xdr.sh > ipc_xdr.cc

doc: mic.ps mic_exception.ps

# Get general, invariant targets
EXTRA_DELETES = ipc_xdr.cc ipc_defs.h
include $(SUPPORT_DIR)/make.targets

#depend: $(LY_CC) ipc_xdr.cc 
#	makedepend $(DEPEND_FLAGS) $(INCLUDES) -- $(Y_SRCS) $(L_SRCS) $(CC_SRCS) $(C_SRCS) 

#######################################################################
# $Log: makefile,v $
# Revision 1.1.1.1  2008/07/14 16:44:16  endo
# MAST Project (based on MissionLab-MINOS-20071018.tar.gz)
#
# Revision 1.1.1.1  2006/07/20 17:17:46  endo
# MINOS Project (based on MissionLab-7.0.20060712.tar.gz)
#
# Revision 1.1.1.1  2006/07/12 13:37:55  endo
# MissionLab 7.0
#
# Revision 1.1  2006/07/01 00:25:48  endo
# CMDLi from MARS 2020 migrated into AO-FNC repository.
#
# Revision 1.1.1.1  2006/06/29 20:42:07  endo
# cmdli local repository.
#
# Revision 1.28  2004/04/27 18:36:05  doug
# fixed build problems with win32
#
# Revision 1.27  2004/03/26 22:30:56  doug
# making progress on win32 build
#
# Revision 1.26  2004/03/26 22:15:04  doug
# for win32, just build the header and skip compilation.
#
# Revision 1.25  2004/03/26 17:48:20  doug
# fixed build
#
# Revision 1.24  2004/03/26 16:57:20  doug
# switched to using make.target
#
# Revision 1.23  2004/03/24 22:15:39  doug
# working on win32 port
#
# Revision 1.22  2004/03/12 20:36:44  doug
# snap
#
# Revision 1.21  2004/03/08 14:52:18  doug
# cross compiles on visual C++
#
# Revision 1.20  2004/02/28 19:26:15  doug
# builds clean on Fedora (commented out a matcon call)
#
# Revision 1.19  2004/02/28 16:35:23  doug
# getting cmdli to work in sara
#
# Revision 1.18  2004/02/20 20:55:14  doug
# barriers work
#
# Revision 1.17  2003/12/10 17:23:36  doug
# working on tasker
#
# Revision 1.16  2003/11/26 22:50:42  doug
# working on state machines
#
# Revision 1.15  2003/11/07 22:54:33  doug
# working on cmdl_io
#
# Revision 1.14  2003/11/07 20:29:09  doug
# added cmdli interpreter library
#
# Revision 1.13  2003/11/03 22:43:43  doug
# adding defComposite support
#
# Revision 1.12  2003/10/22 20:34:15  doug
# still working on glyph_editor
#
# Revision 1.11  2003/10/07 21:02:41  doug
# working on open click
#
# Revision 1.10  2003/09/29 19:09:12  doug
# getting hooked into mouse events
#
# Revision 1.9  2003/08/25 22:01:54  doug
# builds against libccl_gui
#
# Revision 1.8  2003/08/22 21:23:53  doug
# Back from Benning
#
# Revision 1.7  2003/06/30 22:30:42  doug
# Added altitude to robots
#
# Revision 1.6  2003/06/27 19:13:44  doug
# got tomahawk to display
#
# Revision 1.5  2003/04/25 22:13:35  doug
# still working on tcp support
#
# Revision 1.4  2003/04/07 12:44:43  doug
# moving to RedHat 9
#
# Revision 1.3  2002/10/08 14:31:35  doug
# fix so works without special environment setup
#
# Revision 1.2  2002/10/07 19:32:41  doug
# update
#
# Revision 1.1.1.1  2002/10/02 18:24:34  doug
# Initial import into cvs
#
#
#######################################################################



###########################################################################
# dependencies generated by makedepend

# DO NOT DELETE

