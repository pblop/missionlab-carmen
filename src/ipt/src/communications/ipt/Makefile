# Makefile generated by imake - do not edit!
# $Xorg: imake.c,v 1.6 2001/02/09 02:03:15 xorgcvs Exp $

.KEEP_STATE:

all:: libipt.a iptserver

RM = rm -f
AR = ar crv
RANLIB = ranlib
DEPEND = makedepend
ALL_OBJS = *.o
EMPTY =

SYSTEM_CC_INCLUDES = $(CCHOME)/include/CC
INCDIR = ..
INC_PATH_VX	= -I$(WORKSHOME)/h
IPTLIB = libipt.a
IPTVXLIB = vxIPT

CCINCLUDES = -I$(INCDIR)
CCSUFFIX = cc
CSUFFIX = c
CCFLAGS = $(CCINCLUDES) -DWITH_PTHREADS

MAINTYPE = LINUX
LINUX_FLAGS = -g -DLINUX -DWITH_PTHREADS
LINUX_COMPILER = g++
LINUX_CCOMPILER = gcc

install.LINUX:: LINUX/$(IPTLIB)
	cp LINUX/$(IPTLIB) $(INSTALL_DIR)/lib/LINUX
	#ranlib -t $(INSTALL_DIR)/lib/LINUX/$(IPTLIB)

all.LINUX:: LINUX/$(IPTLIB) LINUX/iptserver

clean::
	$(RM) LINUX/$(ALL_FILES)

install:: install.LINUX

depend:: depend.LINUX

install:: install.includes install.server

install.server:: $(MAINTYPE)/iptserver
	cp $(MAINTYPE)/iptserver $(INSTALL_DIR)/bin

install.includes:: ipt_comm.h tcx.h tcxP.h
	$(RM) $(INSTALL_DIR)/include/ipt/$(ALL_FILES).h
	cp *.h $(INSTALL_DIR)/include/ipt

# -------------------------------------------------------------------------

    SRCS += vxconnection.$(CCSUFFIX)

    SRCS += vxcommunicator.$(CCSUFFIX)

    SRCS += servervx.$(CCSUFFIX)

    SRCS += unixcommunicator.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/unixcommunicator.o
LINUX_LIB_SRCS += unixcommunicator.cc

LINUX/$(IPTLIB): LINUX/unixcommunicator.o
LINUX/unixcommunicator.o: unixcommunicator.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c unixcommunicator.$(CCSUFFIX) -o LINUX/unixcommunicator.o

    SRCS += server.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/server.o
LINUX_LIB_SRCS += server.cc

LINUX/$(IPTLIB): LINUX/server.o
LINUX/server.o: server.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c server.$(CCSUFFIX) -o LINUX/server.o

    SRCS += pending.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/pending.o
LINUX_LIB_SRCS += pending.cc

LINUX/$(IPTLIB): LINUX/pending.o
LINUX/pending.o: pending.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c pending.$(CCSUFFIX) -o LINUX/pending.o

    SRCS += route.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/route.o
LINUX_LIB_SRCS += route.cc

LINUX/$(IPTLIB): LINUX/route.o
LINUX/route.o: route.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c route.$(CCSUFFIX) -o LINUX/route.o

    SRCS += forconnection.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/forconnection.o
LINUX_LIB_SRCS += forconnection.cc

LINUX/$(IPTLIB): LINUX/forconnection.o
LINUX/forconnection.o: forconnection.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c forconnection.$(CCSUFFIX) -o LINUX/forconnection.o

    SRCS += ipt_extra.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/ipt_extra.o
LINUX_LIB_SRCS += ipt_extra.cc

LINUX/$(IPTLIB): LINUX/ipt_extra.o
LINUX/ipt_extra.o: ipt_extra.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c ipt_extra.$(CCSUFFIX) -o LINUX/ipt_extra.o

    SRCS += ipt.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/ipt.o
LINUX_LIB_SRCS += ipt.cc

LINUX/$(IPTLIB): LINUX/ipt.o
LINUX/ipt.o: ipt.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c ipt.$(CCSUFFIX) -o LINUX/ipt.o

    SRCS += tcpcommunicator.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/tcpcommunicator.o
LINUX_LIB_SRCS += tcpcommunicator.cc

LINUX/$(IPTLIB): LINUX/tcpcommunicator.o
LINUX/tcpcommunicator.o: tcpcommunicator.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c tcpcommunicator.$(CCSUFFIX) -o LINUX/tcpcommunicator.o

    SRCS += pigeonhole.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/pigeonhole.o
LINUX_LIB_SRCS += pigeonhole.cc

LINUX/$(IPTLIB): LINUX/pigeonhole.o
LINUX/pigeonhole.o: pigeonhole.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c pigeonhole.$(CCSUFFIX) -o LINUX/pigeonhole.o

    SRCS += destination.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/destination.o
LINUX_LIB_SRCS += destination.cc

LINUX/$(IPTLIB): LINUX/destination.o
LINUX/destination.o: destination.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c destination.$(CCSUFFIX) -o LINUX/destination.o

    SRCS += time.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/time.o
LINUX_LIB_SRCS += time.cc

LINUX/$(IPTLIB): LINUX/time.o
LINUX/time.o: time.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c time.$(CCSUFFIX) -o LINUX/time.o

    SRCS += event.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/event.o
LINUX_LIB_SRCS += event.cc

LINUX/$(IPTLIB): LINUX/event.o
LINUX/event.o: event.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c event.$(CCSUFFIX) -o LINUX/event.o

    SRCS += filter.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/filter.o
LINUX_LIB_SRCS += filter.cc

LINUX/$(IPTLIB): LINUX/filter.o
LINUX/filter.o: filter.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c filter.$(CCSUFFIX) -o LINUX/filter.o

    SRCS += connection.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/connection.o
LINUX_LIB_SRCS += connection.cc

LINUX/$(IPTLIB): LINUX/connection.o
LINUX/connection.o: connection.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c connection.$(CCSUFFIX) -o LINUX/connection.o

    SRCS += message.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/message.o
LINUX_LIB_SRCS += message.cc

LINUX/$(IPTLIB): LINUX/message.o
LINUX/message.o: message.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c message.$(CCSUFFIX) -o LINUX/message.o

    SRCS += format.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/format.o
LINUX_LIB_SRCS += format.cc

LINUX/$(IPTLIB): LINUX/format.o
LINUX/format.o: format.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c format.$(CCSUFFIX) -o LINUX/format.o

    SRCS += messagetype.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/messagetype.o
LINUX_LIB_SRCS += messagetype.cc

LINUX/$(IPTLIB): LINUX/messagetype.o
LINUX/messagetype.o: messagetype.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c messagetype.$(CCSUFFIX) -o LINUX/messagetype.o

    SRCS += hash.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/hash.o
LINUX_LIB_SRCS += hash.cc

LINUX/$(IPTLIB): LINUX/hash.o
LINUX/hash.o: hash.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c hash.$(CCSUFFIX) -o LINUX/hash.o

    SRCS += primformatters.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/primformatters.o
LINUX_LIB_SRCS += primformatters.cc

LINUX/$(IPTLIB): LINUX/primformatters.o
LINUX/primformatters.o: primformatters.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c primformatters.$(CCSUFFIX) -o LINUX/primformatters.o

    SRCS += primcomm.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/primcomm.o
LINUX_LIB_SRCS += primcomm.cc

LINUX/$(IPTLIB): LINUX/primcomm.o
LINUX/primcomm.o: primcomm.$(CCSUFFIX)
	$(cfront_CPP) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c primcomm.$(CCSUFFIX) -o LINUX/primcomm.o

    SRCS += lex.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/lex.o
LINUX_LIB_SRCS += lex.cc

LINUX/$(IPTLIB): LINUX/lex.o
LINUX/lex.o: lex.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c lex.$(CCSUFFIX) -o LINUX/lex.o

    SRCS += list.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/list.o
LINUX_LIB_SRCS += list.cc

LINUX/$(IPTLIB): LINUX/list.o
LINUX/list.o: list.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c list.$(CCSUFFIX) -o LINUX/list.o

    SRCS += parseformat.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/parseformat.o
LINUX_LIB_SRCS += parseformat.cc

LINUX/$(IPTLIB): LINUX/parseformat.o
LINUX/parseformat.o: parseformat.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c parseformat.$(CCSUFFIX) -o LINUX/parseformat.o

    SRCS += tcx_cover.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/tcx_cover.o
LINUX_LIB_SRCS += tcx_cover.cc

LINUX/$(IPTLIB): LINUX/tcx_cover.o
LINUX/tcx_cover.o: tcx_cover.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c tcx_cover.$(CCSUFFIX) -o LINUX/tcx_cover.o

    SRCS += ipt_cover.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/ipt_cover.o
LINUX_LIB_SRCS += ipt_cover.cc

LINUX/$(IPTLIB): LINUX/ipt_cover.o
LINUX/ipt_cover.o: ipt_cover.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c ipt_cover.$(CCSUFFIX) -o LINUX/ipt_cover.o

    SRCS += resource.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/resource.o
LINUX_LIB_SRCS += resource.cc

LINUX/$(IPTLIB): LINUX/resource.o
LINUX/resource.o: resource.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c resource.$(CCSUFFIX) -o LINUX/resource.o

    SRCS += timertable.$(CCSUFFIX)

LINUX_LIB_OBJS += LINUX/timertable.o
LINUX_LIB_SRCS += timertable.cc

LINUX/$(IPTLIB): LINUX/timertable.o
LINUX/timertable.o: timertable.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c timertable.$(CCSUFFIX) -o LINUX/timertable.o

    SRCS += vxmain.$(CCSUFFIX)

    SRCS += g++.$(CCSUFFIX)

$(IPTLIB): $(MAINTYPE)/$(IPTLIB)

LINUX/$(IPTLIB): $(LINUX_LIB_OBJS)
	$(RM) $@
	$(AR) $@  $(LINUX_LIB_OBJS)
	$(RANLIB) $@

SRCS += server_if.$(CCSUFFIX)
server_if: $(MAINTYPE)/server_if

LINUX/server_if: LINUX/server_if.o
LINUX/server_if.o: server_if.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c server_if.$(CCSUFFIX) -o LINUX/server_if.o
LINUX/server_if: LINUX/$(IPTLIB)
	$(LINUX_COMPILER) LINUX/server_if.o -o LINUX/server_if LINUX/$(IPTLIB) $(LINUX_LINK) $(EXTRALIBS)

SRCS += servermain.$(CCSUFFIX)
iptserver: $(MAINTYPE)/iptserver

LINUX/iptserver: LINUX/servermain.o
LINUX/servermain.o: servermain.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c servermain.$(CCSUFFIX) -o LINUX/servermain.o
LINUX/iptserver: LINUX/$(IPTLIB)
	$(LINUX_COMPILER) LINUX/servermain.o -o LINUX/iptserver LINUX/$(IPTLIB) $(LINUX_LINK) $(EXTRALIBS)

SRCS += main.$(CCSUFFIX)
ipttest: $(MAINTYPE)/ipttest

LINUX/ipttest: LINUX/main.o
LINUX/main.o: main.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c main.$(CCSUFFIX) -o LINUX/main.o
LINUX/ipttest: LINUX/$(IPTLIB)
	$(LINUX_COMPILER) LINUX/main.o -o LINUX/ipttest LINUX/$(IPTLIB) $(LINUX_LINK) $(EXTRALIBS)

SRCS += pstest.$(CCSUFFIX)
pstest: $(MAINTYPE)/pstest

LINUX/pstest: LINUX/pstest.o
LINUX/pstest.o: pstest.$(CCSUFFIX)
	$(EMPTY) $(LINUX_COMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c pstest.$(CCSUFFIX) -o LINUX/pstest.o
LINUX/pstest: LINUX/$(IPTLIB)
	$(LINUX_COMPILER) LINUX/pstest.o -o LINUX/pstest LINUX/$(IPTLIB) $(LINUX_LINK) $(EXTRALIBS)

SRCS += ipt_ctest.$(CSUFFIX)
iptctest: $(MAINTYPE)/iptctest

LINUX/iptctest: LINUX/ipt_ctest.o
LINUX/ipt_ctest.o: ipt_ctest.$(CSUFFIX)
	$(LINUX_CCOMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c ipt_ctest.$(CSUFFIX) -o LINUX/ipt_ctest.o
LINUX/iptctest: LINUX/$(IPTLIB)
	$(LINUX_CCOMPILER) LINUX/ipt_ctest.o -o LINUX/iptctest LINUX/$(IPTLIB) $(LINUX_LINK) $(EXTRALIBS)

SRCS += tcx_test.$(CSUFFIX)
tcxtest: $(MAINTYPE)/tcxtest

LINUX/tcxtest: LINUX/tcx_test.o
LINUX/tcx_test.o: tcx_test.$(CSUFFIX)
	$(LINUX_CCOMPILER) $(LINUX_FLAGS) $(CCFLAGS) -c tcx_test.$(CSUFFIX) -o LINUX/tcx_test.o
LINUX/tcxtest: LINUX/$(IPTLIB)
	$(LINUX_CCOMPILER) LINUX/tcx_test.o -o LINUX/tcxtest LINUX/$(IPTLIB) $(LINUX_LINK) $(EXTRALIBS)

ALL_FILES = *

